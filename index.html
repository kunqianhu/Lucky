<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emoji Slot Machine</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    padding-top: 50px;
    background-color: #fef6f0;
  }
  .slot-machine {
    display: inline-block;
    font-size: 50px;
    border: 4px solid #333;
    padding: 20px;
    border-radius: 10px;
    background-color: #fff;
  }
  .reels {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
  }
  .reel-container {
    width: 80px;
    height: 80px;
    overflow: hidden;
    border: 2px solid #333;
    margin: 0 5px;
    border-radius: 8px;
    background-color: #e0e0e0;
    position: relative;
  }
  .reel {
    display: flex;
    flex-direction: column;
    position: absolute;
    top: 0;
    width: 100%;
  }
  .reel span {
    height: 80px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 0.3s;
  }
  button {
    font-size: 20px;
    padding: 10px 20px;
    cursor: pointer;
  }
  .message {
    margin-top: 20px;
    font-size: 24px;
    font-weight: bold;
  }
  .coins {
    margin-top: 10px;
    font-size: 20px;
  }
  .win {
    animation: bounce 0.5s ease 0s 3, sparkle 1s ease;
  }
  @keyframes bounce {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
  }
  @keyframes sparkle {
    0%,100% { text-shadow: 0 0 0 #fff; }
    25% { text-shadow: 0 0 8px gold, 0 0 12px yellow; }
    50% { text-shadow: 0 0 12px gold, 0 0 20px yellow; }
    75% { text-shadow: 0 0 8px gold, 0 0 12px yellow; }
  }
</style>
</head>
<body>

<h1>🎰 Emoji Slot Machine 🎰</h1>

<div class="slot-machine">
  <div class="reels">
    <div class="reel-container"><div class="reel" id="reel1"></div></div>
    <div class="reel-container"><div class="reel" id="reel2"></div></div>
    <div class="reel-container"><div class="reel" id="reel3"></div></div>
  </div>
  <button id="spinButton">Spin! (-50 coins)</button>
  <div class="message" id="message"></div>
  <div class="coins" id="coins">💰 Coins: 1000</div>
</div>

<script>
const emojis = ["🍬","🍧","🌷","🍄","🍀","🦋","🦄"];
let coins = 1000;

function spin() {
  if (coins < 50) {
    document.getElementById("message").textContent = "Not enough coins! 💔";
    return;
  }
  coins -= 50;
  document.getElementById("coins").textContent = `💰 Coins: ${coins}`;

  const reels = [document.getElementById("reel1"), document.getElementById("reel2"), document.getElementById("reel3")];

  // Decide if this spin is a jackpot (5%)
  let isJackpot = Math.random() < 0.05;
  let jackpotEmoji = "";
  if (isJackpot) {
    jackpotEmoji = emojis[Math.floor(Math.random() * emojis.length)];
  }

  // Fill reels with random emojis for scrolling effect
  reels.forEach(reel => {
    reel.innerHTML = "";
    for (let i = 0; i < 30; i++) {
      const span = document.createElement("span");
      if (isJackpot) {
        span.textContent = jackpotEmoji; // all the same emoji
      } else {
        span.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      }
      reel.appendChild(span);
    }
  });

  // Animate reels
  reels.forEach((reel, idx) => {
    const duration = 2000 + idx * 400;
    reel.style.transition = `transform ${duration}ms cubic-bezier(0.33, 1, 0.68, 1)`;
    const finalIndex = Math.floor(Math.random() * emojis.length) + 15;
    reel.style.transform = `translateY(-${finalIndex * 80}px)`;
  });

  // Check win after longest reel animation
  setTimeout(() => {
    const finalEmojis = reels.map(reel => {
      const children = reel.children;
      return children[children.length - 1].textContent;
    });

    const message = document.getElementById("message");

    if (finalEmojis[0] === finalEmojis[1] && finalEmojis[1] === finalEmojis[2]) {
      message.textContent = "🎉 JACKPOT! +500 coins! 🎉";
      message.style.color = "green";
      coins += 500;
      reels.forEach(r => r.lastChild.classList.add("win"));
    } else if (finalEmojis[0] === finalEmojis[1] || finalEmojis[1] === finalEmojis[2] || finalEmojis[0] === finalEmojis[2]) {
      message.textContent = "✨ Small win! +100 coins! ✨";
      message.style.color = "blue";
      coins += 100;
      reels.forEach(r => {
        if (r.lastChild.textContent === finalEmojis[0] || r.lastChild.textContent === finalEmojis[1]) {
          r.lastChild.classList.add("win");
        }
      });
    } else {
      message.textContent = "Try again!";
      message.style.color = "red";
    }

    document.getElementById("coins").textContent = `💰 Coins: ${coins}`;
  }, 3000);
}

document.getElementById("spinButton").addEventListener("click", spin);

// Initialize reels
document.querySelectorAll(".reel").forEach(reel => {
  reel.innerHTML = emojis.map(e => `<span>${e}</span>`).join("");
});
</script>

</body>
</html>
